{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"$id": "https://example.com/json-api-request.schema.json",
	"description": "CUD specs for JSON:API request. See: https://jsonapi.org/format/#crud",
	"title": "JSON:API Request",
	"oneOf": [{ "$ref": "#/definitions/createRequest" }],
	"definitions": {
		"attributes": {
			"type": "object",
			"additionalProperties": true
		},
		"ref": {
			"type": "object",
			"required": ["type", "id"],
			"properties": {
				"type": { "type": "string" },
				"id": { "type": "string" }
			}
		},
		"relationships": {
			"type": "object",
			"additionalProperties": {
				"type": "object",
				"properties": {
					"data": {
						"oneOf": [
							{ "$ref": "#/definitions/ref" },
							{ "type": "array", "items": { "$ref": "#/definitions/ref" } }
						]
					}
				}
			}
		},
		"createResource": {
			"type": "object",
			"required": ["type"],
			"properties": {
				"type": { "type": "string" },
				"id": { "type": "string" },
				"attributes": {
					"$ref": "#/definitions/attributes"
				},
				"relationships": {
					"$ref": "#/definitions/relationships"
				}
			}
		},
		"createRequest": {
			"type": "object",
			"required": ["data"],
			"properties": {
				"data": { "$ref": "#/definitions/createResource" }
			}
		}
	}
}
