{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"type": "object",
	"required": ["type"],
	"$ref": "#/$defs/query",
	"$defs": {
		"subquery": {
			"type": "object",
			"allOf": [{ "not": { "required": ["id"] } }, { "$ref": "#/$defs/query" }]
		},
		"query": {
			"type": "object",
			"properties": {
				"type": { "type": "string" },
				"select": { "type": "object" }
			}
		},
		"selectObject": {
			"type": "object",
			"properties": {
				"*": {}
			},
			"additionalProperties": {
				"anyOf": [{ "type": "string" }, { "$ref": "#/$defs/subquery" }]
			}
		},
		"select": {
			"oneOf": [
				{ "type": "string", "const": "*" },
				{
					"type": "array",
					"items": {
						"oneOf": [{ "type": "string" }, { "$ref": "#/$defs/selectObject" }]
					}
				}
			]
		}
	}
}
